#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct Product {
    int id;
    char name[30];
    float price;
    int qty;
};

void addProduct() {
    FILE *fp = fopen("inventory.dat","ab");
    struct Product p;
    printf("Enter ID, Name, Price, Quantity: ");
    scanf("%d %s %f %d", &p.id, p.name, &p.price, &p.qty);
    fwrite(&p,sizeof(p),1,fp);
    fclose(fp);
    printf("Product added.\n");
}

void displayProducts() {
    FILE *fp = fopen("inventory.dat","rb");
    struct Product p;
    printf("\n--- Inventory ---\n");
    while(fread(&p,sizeof(p),1,fp)) {
        printf("ID:%d Name:%s Price:%.2f Qty:%d\n", p.id, p.name, p.price, p.qty);
    }
    fclose(fp);
}

void searchProduct() {
    FILE *fp = fopen("inventory.dat","rb");
    struct Product p;
    int id, found=0;
    printf("Enter product ID to search: ");
    scanf("%d",&id);
    while(fread(&p,sizeof(p),1,fp)) {
        if(p.id==id) {
            printf("Found: %s Price:%.2f Qty:%d\n", p.name, p.price, p.qty);
            found=1; break;
        }
    }
    if(!found) printf("Product not found.\n");
    fclose(fp);
}

int main() {
    int choice;
    do {
        printf("\n1.Add Product\n2.Display Products\n3.Search Product\n4.Exit\nChoice: ");
        scanf("%d",&choice);
        switch(choice) {
            case 1: addProduct(); break;
            case 2: displayProducts(); break;
            case 3: searchProduct(); break;
            case 4: exit(0);
            default: printf("Invalid choice.\n");
        }
    } while(1);
    return 0;
}
